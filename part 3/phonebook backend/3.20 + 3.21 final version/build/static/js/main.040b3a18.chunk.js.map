{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newObject","post","id","delete","put","Notification","message","className","success","content","Search","persons","searchName","handleSearch","result","filter","person","name","toUpperCase","value","onChange","map","key","PersonForm","newName","newNumber","handleSubmit","handleNameChange","handleNewNumberChange","onSubmit","type","Persons","handleDelete","onClick","Person","number","App","useState","setPersons","setNewName","setNewNumber","setSearchName","setMessage","useEffect","personService","initialPersons","catch","error","showMessage","resetMessage","duration","setTimeout","event","target","preventDefault","Boolean","find","window","confirm","console","log","changedNumber","returnedPerson","p","concat","ReactDOM","render","document","getElementById"],"mappings":"kQAEMA,EAAU,cAsBD,EApBA,WAEX,OADgBC,IAAMC,IAAIF,GACXG,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAkB9B,EAfA,SAAAC,GAEX,OADgBL,IAAMM,KAAKP,EAASM,GACrBH,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAa9B,EAVE,SAACG,GAEd,OADgBP,IAAMQ,OAAN,UAAgBT,EAAhB,YAA2BQ,IAC5BL,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAQ9B,EALA,SAACG,EAAIF,GAEhB,OADgBL,IAAMS,IAAN,UAAaV,EAAb,YAAwBQ,GAAMF,GAC/BH,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SClBvCM,EAAe,SAAC,GAAiB,IAAfC,EAAc,EAAdA,QACtB,OACE,yBAAKC,UAAWD,EAAQE,QAAU,UAAY,WAC3CF,EAAQG,UAKTC,EAAS,SAAC,GAAyC,IAAxCC,EAAuC,EAAvCA,QAASC,EAA8B,EAA9BA,WAAYC,EAAkB,EAAlBA,aAC9BC,EAASH,EAAQI,QAAO,SAAAC,GAAM,OAAIA,EAAOC,KAAKC,gBAAkBN,EAAWM,iBACjF,OACE,kDACkB,2BAAOC,MAAOP,EAC/BQ,SAAUP,IACVC,EAAOO,KAAI,SAAAL,GAAM,OAClB,uBAAGM,IAAKN,EAAOC,MAAM,kBAAC,EAAD,CAAQK,IAAKN,EAAOC,KAAMD,OAAQA,UAKrDO,EAAa,SAAC,GAAiF,IAAhFC,EAA+E,EAA/EA,QAASC,EAAsE,EAAtEA,UAAWC,EAA2D,EAA3DA,aAAcC,EAA6C,EAA7CA,iBAAkBC,EAA2B,EAA3BA,sBACvE,OACE,0BAAMC,SAAUH,GAChB,sCACQ,2BAAOP,MAAOK,EACpBJ,SAAUO,KAEZ,wCACU,2BAAOR,MAAOM,EACtBL,SAAUQ,KAEZ,6BACE,4BAAQE,KAAK,UAAb,UAMAC,EAAU,SAAC,GAA6B,IAA5BpB,EAA2B,EAA3BA,QAASqB,EAAkB,EAAlBA,aACzB,OACE,6BACGrB,EAAQU,KAAI,SAAAL,GACX,OACE,yBAAKM,IAAKN,EAAOC,MACf,2BACE,kBAAC,EAAD,CAAQD,OAAQA,IAChB,4BAAQiB,QAAS,kBAAMD,EAAahB,EAAOd,MAA3C,iBAQRgC,EAAS,SAAC,GAAgB,IAAdlB,EAAa,EAAbA,OAChB,OAAO,wCAAIA,EAAOC,KAAX,IAAkBD,EAAOmB,OAAzB,MA4HMC,EAzHH,WAAO,IAAD,EACgBC,mBAAS,IADzB,mBACR1B,EADQ,KACC2B,EADD,OAEgBD,mBAAS,IAFzB,mBAERb,EAFQ,KAECe,EAFD,OAGoBF,mBAAS,IAH7B,mBAGRZ,EAHQ,KAGGe,EAHH,OAIsBH,mBAAS,IAJ/B,mBAIRzB,EAJQ,KAII6B,EAJJ,OAKcJ,mBAAS,CAAE5B,QAAS,GAAID,QAAS,OAL/C,mBAKTF,EALS,KAKAoC,EALA,KAOhBC,qBAAU,WACRC,IAEG/C,MAAK,SAAAgD,GACJP,EAAWO,MAEZC,OAAM,SAAAC,GACLC,EAAY,mCAAoC,QAEnD,IAEH,IA2EMA,EAAc,SAACvC,EAASD,GAC5BkC,EAAW,CAAEjC,UAASD,YACtByC,EAAa,MAITA,EAAe,SAACC,GAClBC,YAAW,WACPT,EAAW,CAAEjC,QAAS,GAAID,QAAS,SACpC0C,IAGP,OACE,6BACE,yCACC5C,EAAQG,QAAU,kBAAC,EAAD,CAAcH,QAASA,IAAc,KACxD,kBAAC,EAAD,CAAQK,QAASA,EAASC,WAAYA,EAAYC,aA3FjC,SAACuC,GACpBX,EAAcW,EAAMC,OAAOlC,UA4FzB,yCACA,kBAAC,EAAD,CAAYK,QAASA,EAASC,UAAWA,EAAWC,aAlFnC,SAAC0B,GACpBA,EAAME,iBAEN,IAAMtD,EAAY,CAChBiB,KAAMO,EACNW,OAAQV,GAGV,GAAI8B,QAAQ5C,EAAQ6C,MAAK,SAAAxC,GAAM,OAAIA,EAAOC,OAASO,OACjD,GAAIiC,OAAOC,QAAP,UAAkBlC,EAAlB,2EAAoG,CACtG,IAAMR,EAASL,EAAQ6C,MAAK,SAAAxC,GAAM,OAAIA,EAAOC,OAASO,KACtDmC,QAAQC,IAAI5C,GACZ,IAAM6C,EAAa,2BAAO7C,GAAP,IAAemB,OAAQV,IAC1CmB,EACU5B,EAAOd,GAAI2D,GAClBhE,MAAK,SAAAiE,GACJxB,EAAW3B,EAAQU,KAAI,SAAA0C,GAAC,OAAIA,EAAE7D,KAAOc,EAAOd,GAAK6D,EAAID,MACrDd,EAAY,GAAD,OAAIhC,EAAOC,KAAX,+BAA6C,GACxDsB,EAAW,IACXC,EAAa,OAEdM,OAAM,SAAAC,GAELT,EAAW3B,EAAQI,QAAO,SAAAgD,GAAC,OAAIA,IAAM/C,MACrCgC,EAAY,kBAAD,OAAmBhC,EAAOC,KAA1B,+CAA4E,GACvFsB,EAAW,IACXC,EAAa,aAIrBI,EACU5C,GACPH,MAAK,SAAAiE,GACJxB,EAAW3B,EAAQqD,OAAOF,IAC1BvB,EAAW,IACXC,EAAa,IACbQ,EAAY,SAAD,OAAUxB,EAAV,MAAsB,MAElCsB,OAAM,SAAAC,GAELY,QAAQC,IAAIb,EAAMjD,SAASC,MAC3BiD,EAAY,GAAD,OAAID,EAAMjD,SAASC,KAAKgD,MAAxB,MAAkC,OA0C/CpB,iBA3FqB,SAACyB,GACxBb,EAAWa,EAAMC,OAAOlC,QA0FcS,sBAvFV,SAACwB,GAC7BZ,EAAaY,EAAMC,OAAOlC,UAwFxB,uCACA,kBAAC,EAAD,CAASR,QAASA,EAASqB,aAzCV,SAAC9B,GACpB,IAAMc,EAASL,EAAQ6C,MAAK,SAAAxC,GAAM,OAAIA,EAAOd,KAAOA,KACpD,GAAIuD,OAAOC,QAAP,iBAAyB1C,EAAOC,KAAhC,OACF,OACE2B,EACY1C,GACTL,MAAK,SAAAE,GACJuC,EAAW3B,EAAQI,QAAO,SAAAC,GAAM,OAAIA,EAAOd,KAAOA,MAClD8C,EAAY,WAAD,OAAYhC,EAAOC,KAAnB,MAA4B,MAExC6B,OAAM,SAAAC,GACLT,EAAW3B,EAAQI,QAAO,SAAAC,GAAM,OAAIA,EAAOd,KAAOA,MAClD8C,EAAY,GAAD,OAAIhC,EAAOC,KAAX,+CAA6D,W,MC/IpFgD,IAASC,OACT,kBAAC,EAAD,MACAC,SAASC,eAAe,W","file":"static/js/main.040b3a18.chunk.js","sourcesContent":["import axios from \"axios\"\r\n\r\nconst baseUrl = 'api/persons'\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst create = newObject => {\r\n    const request = axios.post(baseUrl, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst deletion = (id) => {\r\n    const request = axios.delete(`${baseUrl}/${id}`)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nexport default { getAll, create, deletion, update }","import React, { useState, useEffect } from 'react'\r\nimport personService from './services/persons'\r\n\r\nconst Notification = ({ message }) => {\r\n  return (\r\n    <div className={message.success ? 'success' : 'failure'}>\r\n      {message.content}\r\n    </div>\r\n  ) \r\n}\r\n\r\nconst Search = ({persons, searchName, handleSearch}) => {\r\n  const result = persons.filter(person => person.name.toUpperCase() === searchName.toUpperCase())\r\n  return (\r\n    <div>\r\n    filter shown with <input value={searchName}\r\n     onChange={handleSearch}/>\r\n    {result.map(person =>\r\n    <p key={person.name}><Person key={person.name} person={person} /></p>)}\r\n    </div>\r\n  )\r\n}\r\n\r\nconst PersonForm = ({newName, newNumber, handleSubmit, handleNameChange, handleNewNumberChange}) => {\r\n  return (\r\n    <form onSubmit={handleSubmit} >\r\n    <div>\r\n      name: <input value={newName}\r\n      onChange={handleNameChange} />\r\n    </div>\r\n    <div>\r\n      number: <input value={newNumber}\r\n      onChange={handleNewNumberChange} />\r\n    </div>\r\n    <div>\r\n      <button type=\"submit\">add</button>\r\n    </div>\r\n  </form>\r\n  )\r\n}\r\n\r\nconst Persons = ({persons, handleDelete}) => {\r\n  return (\r\n    <div>\r\n      {persons.map(person => {\r\n        return (\r\n          <div key={person.name}>\r\n            <p>\r\n              <Person person={person} />\r\n              <button onClick={() => handleDelete(person.id)}>delete</button>\r\n            </p>\r\n          </div>\r\n        )})}\r\n    </div>\r\n  )\r\n}\r\n\r\nconst Person = ({ person }) => {\r\n  return <> {person.name} {person.number} </>\r\n}\r\n\r\nconst App = () => {\r\n  const [ persons, setPersons ] = useState([])\r\n  const [ newName, setNewName ] = useState('')\r\n  const [ newNumber, setNewNumber ] = useState('')\r\n  const [ searchName, setSearchName ] = useState('')\r\n  const [message, setMessage] = useState({ content: '', success: null })\r\n\r\n  useEffect(() => {\r\n    personService\r\n      .getAll()\r\n      .then(initialPersons => {\r\n        setPersons(initialPersons)\r\n      })\r\n      .catch(error => {\r\n        showMessage('Error, couldn\\'t get the data :(', false)\r\n      })\r\n  }, [])\r\n\r\n  const handleSearch = (event) => {\r\n    setSearchName(event.target.value)\r\n  }\r\n\r\n  const handleNameChange = (event) => {\r\n    setNewName(event.target.value)\r\n  }\r\n\r\n  const handleNewNumberChange = (event) => {\r\n    setNewNumber(event.target.value)\r\n  }\r\n\r\n  const handleSubmit = (event) => {\r\n    event.preventDefault()\r\n    \r\n    const newObject = {\r\n      name: newName,\r\n      number: newNumber\r\n    }\r\n\r\n    if (Boolean(persons.find(person => person.name === newName))) {\r\n      if (window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)) {\r\n        const person = persons.find(person => person.name === newName)\r\n        console.log(person)\r\n        const changedNumber = {...person, number: newNumber}\r\n        personService\r\n          .update(person.id, changedNumber)\r\n          .then(returnedPerson => {\r\n            setPersons(persons.map(p => p.id !== person.id ? p : returnedPerson))\r\n            showMessage(`${person.name}'s number has changed now.`, true)\r\n            setNewName('')\r\n            setNewNumber('')\r\n          })\r\n          .catch(error => {\r\n            //console.log('rejection works')\r\n            setPersons(persons.filter(p => p !== person))\r\n            showMessage(`Information of ${person.name} has already been removed from the server.`, false) \r\n            setNewName('')\r\n            setNewNumber('')\r\n          })\r\n    }\r\n    } else {\r\n    personService\r\n      .create(newObject)\r\n      .then(returnedPerson => {\r\n        setPersons(persons.concat(returnedPerson))\r\n        setNewName('')\r\n        setNewNumber('')\r\n        showMessage(`Added ${newName}!`, true)\r\n      })\r\n      .catch(error => {\r\n        // this is the way to access the error message\r\n        console.log(error.response.data)\r\n        showMessage(`${error.response.data.error} `, false)\r\n      })\r\n  }}\r\n\r\n  const handleDelete = (id) => {\r\n    const person = persons.find(person => person.id === id)\r\n    if (window.confirm(`delete ${person.name} ?`)) {\r\n      return (\r\n        personService\r\n          .deletion(id)\r\n          .then(data => {\r\n            setPersons(persons.filter(person => person.id !== id))\r\n            showMessage(`Removed ${person.name}!`, true)\r\n          })\r\n          .catch(error => {\r\n            setPersons(persons.filter(person => person.id !== id))\r\n            showMessage(`${person.name} has already been removed from the server.`, false)\r\n          })\r\n      )\r\n    }\r\n  }\r\n\r\n  const showMessage = (content, success) => {\r\n    setMessage({ content, success })\r\n    resetMessage(5000)\r\n\r\n}\r\n\r\n  const resetMessage = (duration) => {\r\n      setTimeout(() => {\r\n          setMessage({ content: '', success: null })\r\n      }, duration)\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      {message.content ? <Notification message={message} /> : null}\r\n      <Search persons={persons} searchName={searchName} handleSearch={handleSearch} />\r\n\r\n      <h3>add a new</h3>\r\n      <PersonForm newName={newName} newNumber={newNumber} handleSubmit={handleSubmit}\r\n      handleNameChange={handleNameChange} handleNewNumberChange={handleNewNumberChange} />\r\n\r\n      <h3>Numbers</h3>\r\n      <Persons persons={persons} handleDelete={handleDelete} />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./App\";\r\nimport './index.css'\r\n\r\nReactDOM.render(\r\n<App />,\r\ndocument.getElementById(\"root\"));\r\n"],"sourceRoot":""}